(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(7737)}])},7737:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return z}});var r=a(5893),s=a(7294),l=a(7536),n=a(4038);let o={OBJECT:"object"},i=n.We,c={},d=[o.OBJECT,...Object.keys(i)];d.forEach(e=>{e!=o.OBJECT&&(c[e]=Object.keys(i[e]))});var u=a(512),f=a(7851);function p(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,f.m)((0,u.W)(t))}let m=s.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:p("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});m.displayName="Input";var b=a(5099),h=a(3742),x=a(8971),y=a(8426),g=a(2003);let v=(0,g.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:n=!1,...o}=e,i=n?y.g7:"button";return(0,r.jsx)(i,{className:p(v({variant:s,size:l,className:a})),ref:t,...o})});j.displayName="Button";let N=b.fC,w=b.ZA,k=b.B4,_=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(b.xz,{ref:t,className:p("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...l,children:[s,(0,r.jsx)(b.JO,{asChild:!0,children:(0,r.jsx)(x.Z,{className:"h-4 w-4 opacity-50"})})]})});_.displayName=b.xz.displayName;let C=s.forwardRef((e,t)=>{let{className:a,children:s,position:l="popper",...n}=e;return(0,r.jsx)(b.h_,{children:(0,r.jsx)(b.VY,{ref:t,className:p("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...n,children:(0,r.jsx)(b.l_,{className:p("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s})})})});C.displayName=b.VY.displayName;let T=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(b.__,{ref:t,className:p("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})});T.displayName=b.__.displayName;let O=s.forwardRef((e,t)=>{let{className:a,children:s,...l}=e;return(0,r.jsxs)(b.ck,{ref:t,className:p("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(b.wU,{children:(0,r.jsx)(h.Z,{className:"h-4 w-4"})})}),(0,r.jsx)(b.eT,{children:s})]})});O.displayName=b.ck.displayName;let V=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(b.Z0,{ref:t,className:p("-mx-1 my-1 h-px bg-muted",a),...s})});V.displayName=b.Z0.displayName;let E=e=>{let{onValueChange:t,list:a,name:l,value:n}=e,[o,i]=(0,s.useState)(!1),c=(0,s.useRef)({value:n});return o?(0,r.jsxs)(N,{required:!0,onValueChange:e=>{c.current.value=e,t(e),i(!1)},open:o,children:[(0,r.jsx)(_,{onBlur:()=>{i(!1)},className:"w-[120px]",children:(0,r.jsx)(k,{placeholder:"Select ".concat(l)})}),(0,r.jsx)(C,{children:(0,r.jsx)(w,{className:"max-h-[25vh]",children:a.map((e,t)=>(0,r.jsx)(O,{value:e,children:e},"option-".concat(t)))})})]}):(0,r.jsx)(j,{className:"w-[120px]",type:"button",onClick:()=>i(!0),children:n})};var R=a(180);let S=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(R.fC,{ref:t,className:p("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...s,children:(0,r.jsx)(R.z$,{className:p("flex items-center justify-center text-current"),children:(0,r.jsx)(h.Z,{className:"h-4 w-4"})})})});S.displayName=R.fC.displayName;var A=e=>{let{currentFieldKey:t,values:a,optionsData:s,subOptions:n,setValue:c,setSubstackVaue:d,control:u,isSubStack:f=!1,subStackValue:p,lastRef:b}=e,h=a("branch"),x=f?"".concat(t,".root"):t,{fields:y,update:g,remove:v,append:N}=(0,l.Dq)({control:u,name:x}),w=e=>{let t=a("".concat(x,"[").concat(e,"]"));if(h[t.subType])d("branch.".concat(t.subType));else{let a=i.string.uuid();g(e,{...y[e],subType:a}),c("branch.".concat(a),{key:t.key,root:[{key:"",type:"person",subType:"fullName"}],params:{isArray:!1,quantity:1}}),d("branch.".concat(a))}},{params:k}=f?a(t):a();return console.log(k),(0,r.jsxs)("div",{ref:e=>{b&&(b.current=e)},className:"w-48 min-w-max h-full bg-primary-foreground/75 rounded p-4 overflow-y-auto ",children:[(0,r.jsxs)("div",{className:"w-full flex justify-between",children:[(0,r.jsx)("h2",{children:f?"Sub Object of ".concat(a(t).key):"Root Object"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(S,{id:"isArray"}),(0,r.jsx)("label",{htmlFor:"isArray",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Is Array"})]}),(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsx)(m,{className:"w-40",type:"text",placeholder:"Object Key",defaultValue:"key",onChange:e=>{},required:!0})})]}),(0,r.jsxs)("div",{className:"mt-4 flex flex-col gap-4",children:[y.map((e,t)=>{var l;let{key:i,subType:u,type:f,id:b}=e;return(0,r.jsxs)("div",{className:"flex gap-4 items-center justify-start w-full",children:[(0,r.jsx)(j,{type:"button",onClick:()=>{v(t),(null==p?void 0:p.split(".")[1])==u&&d("",!0)},children:"X"}),(0,r.jsx)(m,{className:"w-40",type:"text",placeholder:"Object Key",defaultValue:i,onChange:e=>{if(g(t,{subType:u,type:f,key:e.target.value}),"object"==f){let t=a("branch.".concat(u));t.key=e.target.value,c("branch.".concat(u),t)}},required:!0}),(0,r.jsx)(E,{name:"collection",onValueChange:e=>{g(t,{key:i,type:e,subType:e!=f?"":u})},list:n,value:f}),f!=o.OBJECT?(0,r.jsx)(E,{name:"type",onValueChange:e=>{g(t,{key:i,type:f,subType:e})},list:null!==(l=s[a("".concat(x,"[").concat(t,"].type"))])&&void 0!==l?l:[],value:u}):(0,r.jsx)("div",{className:"ml-auto relative",children:(0,r.jsx)(j,{className:'" w-8 h-8 bg-primary rounded '.concat((null==p?void 0:p.split(".")[1])==u?"bg-purple-700":""," "),onClick:()=>{w(t)},type:"button"})})]},"mainstack-".concat(t,"-").concat(null==p?void 0:p.split(".")[1]))}),(0,r.jsx)(j,{type:"button",onClick:()=>N({key:"",type:"person",subType:"fullName"}),children:"Add Field"})]})]})},z=e=>{let{}=e,t=(0,s.useRef)(null),[a,i]=(0,s.useState)([]),{handleSubmit:u,watch:f,setValue:p,control:m}=(0,l.cI)({defaultValues:{currentFieldKey:"root",root:[{key:"Name",type:"person",subType:"fullName"}],params:{isArray:!1,quantity:1},branch:{}}}),b=e=>(t,r)=>{let s=a.slice(0,e+1);s[e]=t,r&&s.pop(),i(s)};return(0,s.useEffect)(()=>{t.current&&t.current.scrollIntoView({behavior:"smooth"})},[a]),(0,r.jsxs)("div",{className:"h-full box-border w-screen flex flex-col",children:[(0,r.jsx)("nav",{className:"w-full h-12 flex px-4 py-3 justify-end",children:(0,r.jsx)(j,{onClick:()=>{!function(e){let t=n.We,a=function e(a,r,s){let l={};for(let s of a)s.type!=o.OBJECT?l[s.key]=t[s.type][s.subType]():l[s.key]=e(r[s.subType].root,r,r[s.subType].isArray);return l}(e.root,e.branch,e.params.isArray);console.log(a)}(f())},className:"",children:"Generate Json"})}),(0,r.jsx)("div",{className:"max-h-[calc(100vh_-_3rem)] h-[calc(100vh_-_3rem)] overflow-y-auto",children:(0,r.jsxs)("form",{onSubmit:u(e=>console.log(e),e=>console.log(e)),className:"p-4 flex gap-4 max-h-full h-full",children:[(0,r.jsx)(A,{control:m,optionsData:c,subOptions:d,values:f,currentFieldKey:f("currentFieldKey"),setValue:p,setSubstackVaue:b(0),subStackValue:a[0]}),a.map((e,s)=>(0,r.jsx)(A,{lastRef:s==a.length-1?t:null,control:m,isSubStack:!0,optionsData:c,subOptions:d,values:f,currentFieldKey:e,setValue:p,setSubstackVaue:b(s+1),subStackValue:a[s+1]},"substack-".concat(e)))]})})]})}}},function(e){e.O(0,[488,427,53,758,45,671,116,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);